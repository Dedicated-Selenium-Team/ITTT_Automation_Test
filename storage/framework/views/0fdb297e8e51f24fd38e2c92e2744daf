<?php $__env->startSection('content'); ?>

<div class="wrap-content cf project-view">

<a href="/project-management" title="Back" class="back">Back</a>

<h1>Edit Project</h1>

<?php echo Form::open(array('url' => array('update-project', $project->project_id), 'id' => 'edit-project')); ?>


<div class="form-group cf">
  <?php echo Form::label('project-name', 'Project Name'); ?>

  <?php echo Form::text('project-name', $project->project_name, array('class' => 'form-control')); ?>

  <?php echo $errors->first('project-name', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('client', 'Client'); ?>

  <?php echo Form::select('client', $client); ?>

  <?php echo Form::hidden('client-id', $project->client_id, array('id' => 'client-id')); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('project-priority', 'Priority'); ?>

  <?php echo Form::select('project-priority', array('' => 'Please Select', 'Low' => 'Low', 'Medium' => 'Medium', 'High' => 'High')); ?>

  <?php echo Form::hidden('project-priority-level', $project->priority, array('id' => 'project-priority-level')); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('project-status', 'Status'); ?>

  <?php echo Form::select('project-status', array('' => 'Please Select', 'Submitted by Client for Estimation' => 'Submitted by Client for Estimation', 'Approved/Awaiting Start' => 'Approved/Awaiting Start', 'In Discussion' => 'In Discussion', 'Awaiting Approval (On Estimate)' => 'Awaiting Approval (On Estimate)', 'Maintenance/On-going' => 'Maintenance/On-Going', 'On Hold' => 'On Hold', 'Closed' => 'Closed', 'Completed' => 'Completed', 'Need to Invoice' => 'Need to Invoice')); ?>

  <?php echo Form::hidden('project-status-level', $project->project_status, array('id' => 'project-status-level')); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('project-start-date', 'Start Date'); ?>

  <?php echo Form::date('project-start-date', $project->start_date); ?>

  <?php echo $errors->first('project-start-date', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('project-end-date', 'End Date'); ?>

  <?php echo Form::date('project-end-date', $project->end_date); ?>

  <?php echo $errors->first('project-end-date', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('hours-tracker', 'Hours Tracker Link'); ?>

  <?php echo Form::text('hours-tracker', $project->hours_tracker_link, array('class' => 'form-control')); ?>

  <?php echo $errors->first('hours-tracker', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('dev-completion-status', 'Developer Completion (%)'); ?>

  <?php echo Form::text('dev-completion-status', $project->dev_completion_status, array('class' => 'form-control')); ?>

  <?php echo $errors->first('dev-completion-status', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('qa-completion-status', 'QA Completion (%)'); ?>

  <?php echo Form::text('qa-completion-status', $project->qa_completion_status, array('class' => 'form-control')); ?>

  <?php echo $errors->first('qa-completion-status', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('design-completion-status', 'Design Completion (%)'); ?>

  <?php echo Form::text('design-completion-status', $project->design_completion_status, array('class' => 'form-control')); ?>

  <?php echo $errors->first('design-completion-status', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('pm-completion-status', 'PM Completion (%)'); ?>

  <?php echo Form::text('pm-completion-status', $project->pm_completion_status, array('class' => 'form-control')); ?>

  <?php echo $errors->first('pm-completion-status', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('dev-live-url', 'Dev/Live URL'); ?>

  <?php echo Form::text('dev-live-url', $project->dev_live_url, array('class' => 'form-control')); ?>

  <?php echo $errors->first('dev-live-url', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('asana-git-url', 'Asana/Git URL'); ?>

  <?php echo Form::text('asana-git-url', $project->asana_git_url, array('class' => 'form-control')); ?>

  <?php echo $errors->first('asana-git-url', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('project-sow-url', 'SOW'); ?>

  <?php echo Form::text('project-sow-url', $project->sow, array('class' => 'form-control')); ?>

  <?php echo $errors->first('project-sow-url', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('q-and-a-doc', 'Q&A Doc Reference'); ?>

  <?php echo Form::text('q-and-a-doc', $project->q_and_a_doc, array('class' => 'form-control')); ?>

  <?php echo $errors->first('q-and-a-doc', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('ticket-ref', 'PRDXN ticket Reference'); ?>

  <?php echo Form::text('ticket-ref', $project->prdxn_ticket_ref, array('class' => 'form-control')); ?>

  <?php echo $errors->first('ticket-ref', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<div class="form-group cf">
  <?php echo Form::label('project-manager', 'Project Manager'); ?>

  <?php echo Form::select('project-manager', $project_manager, null, array('multiple'=>'multiple')); ?>

  <span id="add-pm">Add</span>
  <div class="existing-names-main-wrapper">
    <?php foreach($project->ProjectResources as $resource): ?>
      <?php if($resource->designation_id == 3): ?>
        <div class="existing-pm-name-wrapper">
          <?php foreach($project_manager as $key => $value): ?>
            <?php if($key == $resource->user_id): ?>
              <span class="pm-name"><?php echo e($value); ?></span>
            <?php endif; ?>
          <?php endforeach; ?>
          <input type="text" class="move" name="existing-resource-hours[]" value=<?php echo e($resource->hours); ?>>
          <a href="/delete-project-resource/<?php echo e($resource->project_id); ?>/<?php echo e($resource->user_id); ?>">Remove</a>
          <input type="hidden" class="user-id" name="existing-resource-id[]" value=<?php echo e($resource->user_id); ?>>
          <input type="hidden" name="existing-designation-id[]" value="3">
          <div class="cf"><label for="resource-start-date">Start Date</label><input type="date" id="resource-start-date" name="existing-resource-start-date[]" value=<?php echo e($resource->start_date); ?>></div><div class="cf"><label for="resource-end-date">End Date</label><input type="date" id="resource-end-date" name="existing-resource-end-date[]" value=<?php echo e($resource->end_date); ?>></div>
        </div>
      <?php endif; ?>
    <?php endforeach; ?>
  </div>
  <div class="names-main-wrapper"></div>
</div>

<div class="form-group cf">
  <?php echo Form::label('developer', 'Developers'); ?>

  <?php echo Form::select('developer', $developer, null, array('multiple'=>'multiple')); ?>

  <span id="add-developer">Add</span>
  <div class="existing-names-main-wrapper">
    <?php foreach($project->ProjectResources as $resource): ?>
      <?php if($resource->designation_id == 1): ?>
        <div class="existing-dev-name-wrapper">
          <?php foreach($developer as $key => $value): ?>
            <?php if($key == $resource->user_id): ?>
              <span class="dev-name"><?php echo e($value); ?></span>
            <?php endif; ?>
          <?php endforeach; ?>
          <input type="text" class="move" name="existing-resource-hours[]" value=<?php echo e($resource->hours); ?>>
          <a href="/delete-project-resource/<?php echo e($resource->project_id); ?>/<?php echo e($resource->user_id); ?>">Remove</a>
          <input type="hidden" class="user-id" name="existing-resource-id[]" value=<?php echo e($resource->user_id); ?>>
          <input type="hidden" name="existing-designation-id[]" value="1">
          <div class="cf"><label for="resource-start-date">Start Date</label><input type="date" id="resource-start-date" name="existing-resource-start-date[]" value=<?php echo e($resource->start_date); ?>></div><div class="cf"><label for="resource-end-date">End Date</label><input type="date" id="resource-end-date" name="existing-resource-end-date[]" value=<?php echo e($resource->end_date); ?>></div>
        </div>
      <?php endif; ?>
    <?php endforeach; ?>
  </div>
  <div class="names-main-wrapper"></div>
</div>

<div class="form-group cf">
  <?php echo Form::label('quality-analyst', 'Quality Analyst'); ?>

  <?php echo Form::select('quality-analyst', $quality_analyst, null, array('multiple'=>'multiple')); ?>

  <span id="add-qa">Add</span>
  <div class="existing-names-main-wrapper">
    <?php foreach($project->ProjectResources as $resource): ?>
      <?php if($resource->designation_id == 2): ?>
        <div class="existing-qa-name-wrapper">
          <?php foreach($quality_analyst as $key => $value): ?>
            <?php if($key == $resource->user_id): ?>
              <span class="qa-name"><?php echo e($value); ?></span>
            <?php endif; ?>
          <?php endforeach; ?>
          <input type="text" class="move" name="existing-resource-hours[]" value=<?php echo e($resource->hours); ?>>
          <a href="/delete-project-resource/<?php echo e($resource->project_id); ?>/<?php echo e($resource->user_id); ?>">Remove</a>
          <input type="hidden" class="user-id" name="existing-resource-id[]" value=<?php echo e($resource->user_id); ?>>
          <input type="hidden" name="existing-designation-id[]" value="2">
          <div class="cf"><label for="resource-start-date">Start Date</label><input type="date" id="resource-start-date" name="existing-resource-start-date[]" value=<?php echo e($resource->start_date); ?>></div><div class="cf"><label for="resource-end-date">End Date</label><input type="date" id="resource-end-date" name="existing-resource-end-date[]" value=<?php echo e($resource->end_date); ?>></div>
        </div>
      <?php endif; ?>
    <?php endforeach; ?>
  </div>
  <div class="names-main-wrapper"></div>
</div>

<div class="form-group cf">
  <?php echo Form::label('design', 'Design Team'); ?>

  <?php echo Form::select('design', $design_team, null, array('multiple'=>'multiple')); ?>

  <span id="add-design">Add</span>
  <div class="existing-names-main-wrapper">
    <?php foreach($project->ProjectResources as $resource): ?>
      <?php if($resource->designation_id == 4): ?>
        <div class="existing-design-name-wrapper">
          <?php foreach($design_team as $key => $value): ?>
            <?php if($key == $resource->user_id): ?>
              <span class="design-name"><?php echo e($value); ?></span>
            <?php endif; ?>
          <?php endforeach; ?>
          <input type="text" class="move" name="existing-resource-hours[]" value=<?php echo e($resource->hours); ?>>
          <a href="/delete-project-resource/<?php echo e($resource->project_id); ?>/<?php echo e($resource->user_id); ?>">Remove</a>
          <input type="hidden" class="user-id" name="existing-resource-id[]" value=<?php echo e($resource->user_id); ?>>
          <input type="hidden" name="existing-designation-id[]" value="4">
          <div class="cf"><label for="resource-start-date">Start Date</label><input type="date" id="resource-start-date" name="existing-resource-start-date[]" value=<?php echo e($resource->start_date); ?>></div><div class="cf"><label for="resource-end-date">End Date</label><input type="date" id="resource-end-date" name="existing-resource-end-date[]" value=<?php echo e($resource->end_date); ?>></div>
        </div>
      <?php endif; ?>
    <?php endforeach; ?>
  </div>
  <div class="names-main-wrapper"></div>
</div>

<div class="form-group cf">
  <?php echo Form::label('estimated-time', 'Estimated Time'); ?>

  <?php echo Form::text('estimated-time', $project->estimated_time, array('class' => 'form-control')); ?>

  <?php echo $errors->first('estimated-time', '<div>:message</div>'); ?>

  <p class="error"></p>
</div>

<?php echo Form::submit('Save', array('class' => 'edit-project-btn')); ?>


<?php echo Form::close(); ?>


</div>

<?php $__env->stopSection(); ?>

<?php echo $__env->make('master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>